---
title: git进阶历程
date: 2018-05-29
categories: [cvs]
tags: [git]
description: "git养成后的又一步提升"
cover_picture: http://oss.willhappy.cn/hexo/cover_pic/cover_picture_28.jpg

---

前面的[git养成日记][1]中已经学习了git的基本的操作了，关键是养成使用git的习惯，那为什么还会有这篇文章呢？是因为我在使用git的过程中，也遇到了问题，所以写这篇文章是记录下自己的问题解决和需求的解决。

<!--more-->

[toc]

### 前言

git高阶教程参考指南，[git-recipes][10]

### 一. 小知识点

**开发分支**
> git clone  #克隆下来的代码只做本地master分支和远程分支的关联

想要需要在其他分支上开发（存在其他远程分支）,两种方式：

> git checkout -b dev origin/dev    #checkout远程的dev分支，在本地起名为dev分支，并切换到本地的dev分支

或者：
> git checkout -b dev #新建并切换分支
git branch --set-upstream dev origin/dev    #本地分支关联远程分支

其实下面两条命令合并起来就是上面一条。可通过下面的命令查看分支的关联情况
> git branch -vv

**仓库关联**
如果在本地初始化的git仓库，在远程新建了远程仓库，通过下面的命令进行关联：
> git remote add origin https://github.com/willhappy/will.git       #origin 别名

### 二. git HEAD 游离问题

错误：
![HEAD detached][2]

解决方案，参考[文章][3]:D,感谢，不想重复造轮子了，就记录下，下次解决参考方便。

### 三. git 子模块

**why?**
关于为什么折腾git子模块呢，因为最近博客折腾的比较多，包括主题，在原来的主题上更改了很多，想着以后可以造福他人（QAQ完全臆想吖），想把主题单独从`hexo`的git仓库中给拿出来，单独管理，同时也方便他人使用更新过的主题。

**解决**
给予上面的需求，我开始查找解决方案，目前呢，git有两种解决方案：

- git submodule       #这是Git官方以前的推荐方案
- git subtree         #从 Git 1.5.2 开始，Git 新增并推荐使用这个功能来管理子项目

通过`git submodule`方式来解决，参考文章[传送门][4]，另外关于git子模块的管理查看[传送门][5]
通过`git subtree`方式解决，可参考文章[传送门][6]，发现这是有赞的帖子，很高兴，好好学习。也可以参考[文章][7]，这篇文章中也对比了这两种方式,可以好好看一下。

### 四. git-flow 的工作流程

关于git-flow,查看[文章][8]

### 五. 关于git分支管理策略

关于如何利用git进行team项目分支管理，参考阮一峰老师的[Git分支管理策略][9]

### 六. git命令常见问题及场景

#### 1. master、origin master 与 origin/master 有什么区别？（[参考][11]）

- `master` 这个很好理解，它代表本地的某个分支名。
- `origin master` 代表着两个概念，前面的 origin 代表远程名，后面的 master 代表远程分支名。
- `origin/master` 只代表一个概念，即远程分支名，是从远程拉取代码后在本地建立的一份拷贝（因此也有人把它叫作本地分支）。

#### 2. git revert和git reset理解。（[参考][12]）（科学上网）

- `git revert`是用一次新的commit来回滚之前的commit，`git reset`是直接删除指定的commit。(`git revert`是撤销某次提交，不影响要撤销提交后面的提交；`git reset`是回滚到某次提交，会影响这次提交后面的提交，个人觉得这样理解比较好)
- 在回滚这一操作上看，效果差不多。但是在日后继续merge以前的老版本时有区别。因为`git revert`是用一次逆向的commit“中和”之前的提交，因此日后合并老的branch时，导致这部分改变不会再次出现，但是`git reset`是之间把某些commit在某个branch上删除，因而和老的branch再次merge时，这些被回滚的commit应该还会被引入。
- `git reset` 是把HEAD向后移动了一下，而`git revert`是HEAD继续前进，只是新的commit的内容和要revert的内容正好相反，能够抵消要被revert的内容。

#### 3. git rebase和git merge

- 形象理解变基，参考[这里][13](科学上网)，解释很有意思，相信你会开心。
- 搞清楚`git rebase`和`git merge`的区别，谨记`git rebase`的黄金法则，参考[这里][14]或者[这里][15](科学上网).
- 关于`git merge --squash`和`git rebase`区别，[了解一下][16].
- 最后，如何保证主干分支的提交历史的简洁可追溯可回滚，一般操作，[了解下][17].

#### 4. git revert撤销合并请求

- `git revert`为撤销一次提交操作，`git reset`为回滚到某次提交的操作，再次重申。
- 当使用`git revert`来撤销一次合并的提交时，会报错，需要使用`-m`来指定一下要恢复的版本线。

```shell
git revert fcd8a10 -m 1 #撤回提交的commit id:fcd8a10 1代表当前分支  2代表在当前分支 merge的分支
```

- 参考[文章一][18]和[文章二][19]

**说明**

1. 虽然上面贴出了解决方案，但是，比较遗憾的是自己还没有把我的需求整理处理，后期有机会会把博客的主题模块独立出来，进行单独的管理。
2. 文章众多引用，首先感谢原作者，然后，本文仅供用于学习笔记，有助以后回顾，切勿用于商业用途。

### other

学习git比较好的可视化操作项目[learnGitBranching][20]

**更多git学习内容持续更新中...**

[1]: http://blog.willhappy.cn/2018/04/26/22_2018-04-26_git%E5%85%BB%E6%88%90%E6%97%A5%E8%AE%B0/
[2]: http://oss.willhappy.cn/18-5-9/54275503.jpg
[3]: https://blog.csdn.net/u011240877/article/details/76273335
[4]: https://blessing.studio/splitting-a-subfolder-out-into-a-new-git-repository/
[5]: http://imtianx.cn/2018/03/08/git_submodule/
[6]: https://tech.youzan.com/git-subtree/
[7]: https://blog.csdn.net/gatieme/article/details/64212666
[8]: https://www.git-tower.com/learn/git/ebook/cn/command-line/advanced-topics/git-flow#start
[9]: http://www.ruanyifeng.com/blog/2012/07/git.html
[10]: https://github.com/geeeeeeeeek/git-recipes
[11]: https://blog.twofei.com/695/
[12]: https://goo.gl/fgWC1G
[13]: https://goo.gl/d4LdGv
[14]: https://juejin.im/post/5a3b97ee5188252103346d46
[15]: https://goo.gl/1YXazm
[16]: https://www.jianshu.com/p/684a8ae9dcf1
[17]: https://blog.csdn.net/yuxin6866/article/details/70156863
[18]: http://blog.chenzuhuang.com/archive/62.html
[19]: https://blog.csdn.net/paul_wei2008/article/details/77477932
[20]: https://github.com/pcottle/learnGitBranching
