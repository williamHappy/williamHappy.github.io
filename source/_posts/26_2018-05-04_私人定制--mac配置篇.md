---
title: 私人定制--mac配置篇
date: 2018-05-04
top: 1
categories: [tools]
tags: [mac]
description: "mac定制篇"
cover_picture: http://oss.willhappy.cn/hexo/cover_pic/cover_picture_26.jpg

---

为什么讲是私人定制呢？ 因为mac从入手， 大部分的软件和环境等都需要自己不断的去更新配置， 可以看到的是， 我们可能后面的环境配置会更新掉前面的环境配置，像本节接下来要说的关于原装vim的配置， 会在后面安装了macvim后， 环境配置得到了重新的配置， 当前的配置永远不可能固定下来， 可能后面配置就会颠覆之前的配置， 以得到功能更大的升华， 就是这样不断的去颠覆之前， 才能更好的为自己所用， 才能达到私人化的定制。 所以， 本章只是做一个指导， 并不完全要这个套路来做， 可以有更多私人化的定制在里面，才能更适合自己。

<!--more-->

[toc]

### 一. mac关于环境变量初探

先简单了解下macOS系统额目录结构， [文章参考][15]

关于mac环境变量详细介绍，参考文章：[传送门][1]

**🏁勾画重点**

##### 查看环境变量

命令：
> [root@localhost u-boot-sh4]#echo $PATH
/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin

**说明：**
PATH的格式为：
PATH=$PATH::::——: ，中间用冒号隔开。

##### 添加PATH环境变量

> [root@localhost u-boot-sh4]#export PATH=/opt/STM/STLinux-2.3/devkit/sh4/bin:$PATH

##### 环境变量文件的优先级

> /etc/profile  /etc/paths  ~/.bash_profile  ~/.bash_login  ~/.profile  ~/.bashrc

**说明：**
`/etc/profile`: 此文件为系统的每个用户设置环境信息,当用户第一次登录时,该文件被执行.
并从/etc/profile.d目录的配置文件中搜集shell的设置.
`/etc/bashrc`: 为每一个运行bash shell的用户执行此文件.当bash shell被打开时,该文件被读取.
`~/.bash_profile`: 每个用户都可使用该文件输入专用于自己使用的shell信息,当用户登录时,该
文件仅仅执行一次!默认情况下,他设置一些环境变量,执行用户的.bashrc文件.
`~/.bashrc`: 该文件包含专用于你的bash shell的bash信息,当登录时以及每次打开新的shell时,该
该文件被读取.
`~/.bash_logout`: 当每次退出系统(退出bash shell)时,执行该文件.

另外,`/etc/profile`中设定的变量(全局)的可以作用于任何用户,而`~/.bashrc`等中设定的变量(局部)只能继承`/etc/profile`中的变量,他们是"父子"关系.

`~/.bash_profile` 是交互式、login 方式进入 bash 运行的
`~/.bashrcv` 是交互式 non-login 方式进入 bash 运行的
通常二者设置大致相同，所以通常前者会调用后者。

##### Mac配置环境变量

1. /etc/profile （建议不修改这个文件 ） 全局（公有）配置，不管是哪个用户，登录时都会读取该文件。
2. /etc/bashrc （一般在这个文件中添加系统级环境变量） 全局（公有）配置，bash shell执行时，不管是何种方式，都会读取此文件。
3. ~/.bash_profile （一般在这个文件中添加用户级环境变量） 每个用户都可使用该文件输入专用于自己使用的shell信息,当用户登录时,该文件仅仅执行一次!

##### 查看 MacOS使用的shell类型

命令：
> echo $SHELL

**说明：**

1. 如果输出的是：csh或者是tcsh，那么你用的就是C Shell。
2. 如果输出的是：bash，sh，zsh，那么你的用的可能就是Bourne Shell的一个变种。 Mac OS X 10.2之前默认的是C Shell。 Mac OS X 10.3之后默认的是Bourne Shell。
3. 那么你可以把你要添加的环境变量添加到你主目录下面的.profile或者.bash_profile，如果存在没有关系添加进去即可，如果没有生成一个。

mac默认的shell为bash，切换命令：
> chsh -s /bin/bash     #切换默认终端bash
 chsh -s /bin/zsh     #切换终端shell为zsh

**⚠️注意**
当mac机器上安装了zsh后   .bash_profile 文件中的环境变量就无法起到作用。
   解决方案：
  （1）   cd ~
  （2）   open .zshrc
  （3）   在.zshrc文件末尾增加.bash_profile的引用: source ~/.bash_profile

原因：linux和macOS默认的shell为`bash`，加载的环境变量配置文件为`～/.bash_profile`，使用zsh的shell时，默认加载的环境变量配置文件为`～/.zshrc`，所以造成`.bash_profile` 文件中的环境变量就无法起到作用，解决只需在将`.bash_profile`文件加到`.zshrc`文件中即可。

### 二. mac必备软件安装配置

#### homebrew安装

为什么先安装homebrew呢？ 因为后面很多安装软件都使用到了homebrew去安装，所以先来安装homebrew为好。
非常简单，参考文章：
[官方网站][2]
[文章][3]

#### 终端神器--iterm2安装配置

其中包括brew安装iterm2， 配置solarized， 配置oh my zsh，还有配置一些字体，插件等等。
详细，请参考文章： [传送门][4]

#### 命令行工具--Oh My Zsh

上面安装iterm2时， 安装了oh my zsh。关于更多oh my zsh的使用配置， 请关注以下文档：
[官方仓库][5]
[文章][6]

**🏁勾画重点**
`lib` 提供了核心功能的脚本库
`tools` 提供安装、升级等功能的快捷工具
`plugins` 自带插件的存在放位置
`templates` 自带模板的存在放位置
`themes`  自带主题文件的存在放位置
`custom` 个性化配置目录，自安装的插件和主题可放这里

**zsh配置代理**
终端使用git、brew等安装软件或者clone代码，会出现速度慢，或者`443`等情况，采用设置代理处理。
使用不同的科学上网工具设置的代理端口不同，看具体配置。

```shell
# 查看代理
$ env | grep -I proxy
https_proxy=http://127.0.0.1:7890
http_proxy=http://127.0.0.1:7890
all_proxy=socks5://127.0.0.1:7890

# 取消代理
$ unset http_proxy
$ unset https_proxy
$ unset all_proxy
```

也可以配置环境变量，灵活开启管理代理, 在`.zshrc`文件中添加以下内容

```vim
proxyon () {
    export http_proxy=Socks5://127.0.0.1:1086
    export https_proxy=Socks5://127.0.0.1:1086
    echo "http/https proxy on."
    curl ip.gs
}

proxyoff () {
    unset http_proxy
    unset https_proxy
    echo "http/https proxy off."
    curl ip.gs
}
```

执行`source ~/.zshrc`生效，即可以使用命令`proxyon`和`proxyoff`即可在当前终端开启和关闭代理。

#### 终端vim配色

上面，安装iterm2时，我们配置了solarized主题，那么，在终端或者iterm2中vim的配色方案，我们也使用solarized的配色方案，保持一致，美观。
参考文章：
[solarized官方网站][7]
[solarized官方仓库][8]
[vim使用solarized配色1][9]
[vim使用solarized配色2][10]

**⚠️注意**
预警： vim使用solarized配色， 要配置文件`.vimrc`, 而后面安装macvim的完整配置方案`.vim_runtime`时，会覆盖该配置文件，导致失效， 如何解决， 请查看[编辑器IDE--vim][11]的第五节 `mac of vim`。

#### macVim编辑器

请移步我的另一篇文章[编辑器IDE--vim][11]的第五节 `mac of vim`, 里面有详细的介绍， 不再做赘述。

#### 效率神器--alfred

安装使用参考： [文章][12]

#### python3安装

mac系统自带python2.7, 现在安装python3版本。
参考： [文章][13]

**⚠️注意**
文章中提到为避免系统的python和brew中安装的python打架，所以要修改环境变量， 我们在这就没有修改， 应为我们安装python3的版本，他适合python版本独立的， 我们使用`python -v`, 读到的就是系统原装的python， 使用`python3 -v`， 读到的就是brew安装的python3， 互不影响，也就不做更改了。当然，这是我自己的观点， 如要了解更多， 还请自己google之。

#### git安装

因为之前安装xcode， 自动安装了git，但是版本不是最新的， 而下面文章介绍了使用brew安装或者更新git版本。
参考：[文章][14]

#### tomcat， maven等安装

web环境的搭建， 都使用到homebrew来安装， 比较简单， 不做赘述。自行学会homebrew， 软件安装管理起来就很方便了。

**定制化持续更新中...**

### 三. 操作技巧

查看应用安装路径命令：
> which git

[1]: http://blog.csdn.net/u010416101/article/details/54618621
[2]: https://blog.csdn.net/h643342713/article/details/52936905
[3]: https://brew.sh/index_zh-cn
[4]: https://www.cnblogs.com/xishuai/p/mac-iterm2.html
[5]: https://github.com/robbyrussell/oh-my-zsh
[6]: https://blog.csdn.net/czg13548930186/article/details/72858289
[7]: http://ethanschoonover.com/solarized
[8]: https://github.com/altercation/solarized
[9]: https://www.vpsee.com/2013/09/use-the-solarized-color-theme-on-mac-os-x-terminal/
[10]: https://blog.csdn.net/hu_fubin/article/details/46573343
[11]: https://blog.willhappy.cn/2018/05/02/24-2018-05-02-bian-ji-qi-ide-vim
[12]: https://www.jianshu.com/p/e9f3352c785f
[13]: https://stringpiggy.hpd.io/mac-osx-python3-dual-install/#step2
[14]: https://blog.csdn.net/xuping901022xp/article/details/51730778
[15]: https://blog.csdn.net/smstong/article/details/15499661
